{% extends "base.html" %}

{% block title %}G·ª£i √ù Phim - Movie Recommendation App{% endblock %}

{% block content %}
<div class="container">
    <h1 class="text-center mb-4">Phim ƒê∆∞·ª£c G·ª£i √ù Cho B·∫°n</h1>
    
    <div class="alert alert-info text-center">
        <h4>üé¨ D·ª±a tr√™n th√¥ng tin c√° nh√¢n c·ªßa b·∫°n</h4>
        <p>Ch√∫ng t√¥i ƒë√£ ph√¢n t√≠ch s·ªü th√≠ch c·ªßa b·∫°n v√† t√¨m ra nh·ªØng b·ªô phim ph√π h·ª£p nh·∫•t!</p>
    </div>

    {% if recommended_genres and recommended_genres|length > 0 %}
    <div class="mb-4">
        <h3 class="text-center">Th·ªÉ Lo·∫°i G·ª£i √ù H√†ng ƒê·∫ßu</h3>
        <ul class="list-group">
            {% for genre in recommended_genres %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                {{ genre.name }}
                <span class="badge bg-primary rounded-pill">{{ "%.1f"|format(genre.probability * 100) }}% ph√π h·ª£p</span>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    {% if movies and movies|length > 0 %}
    <h3 class="text-center mb-4">Phim G·ª£i √ù</h3>
    <div class="row">
        {% for movie in movies %}
        <div class="col-md-4 mb-4">
            <div class="card movie-card h-100">
                {% if movie.poster_url %}
                <img src="{{ movie.poster_url }}" class="card-img-top movie-poster" alt="{{ movie.title }}">
                {% else %}
                <div class="card-img-top movie-poster bg-secondary d-flex justify-content-center align-items-center">
                    <span class="text-white">No Image</span>
                </div>
                {% endif %}
                <div class="card-body">
                    <h5 class="card-title">{{ movie.title }}</h5>
                    <p class="card-text">
                        <small class="text-muted">Th·ªÉ lo·∫°i g·ª£i √Ω: {{ movie.recommended_genre }} ({{ "%.1f"|format(movie.genre_probability * 100) }}% ph√π h·ª£p)</small>
                    </p>
                    <p class="card-text">Rating: {{ movie.vote_average }}/10</p>
                    <a href="/movie/{{ movie.id }}" class="btn btn-primary">Xem Chi Ti·∫øt</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="text-center">
        <div class="alert alert-warning">
            <h4>üîÑ ƒêang x·ª≠ l√Ω g·ª£i √Ω phim...</h4>
            <p>H·ªá th·ªëng ƒëang ph√¢n t√≠ch th√¥ng tin c·ªßa b·∫°n ƒë·ªÉ t√¨m ra nh·ªØng b·ªô phim ph√π h·ª£p nh·∫•t.</p>
            <p>Vui l√≤ng th·ª≠ l·∫°i sau √≠t ph√∫t ho·∫∑c <a href="/profile">c·∫≠p nh·∫≠t th√¥ng tin profile</a> c·ªßa b·∫°n.</p>
        </div>
        
        <div class="mt-4">
            <a href="/profile" class="btn btn-primary me-3">C·∫≠p Nh·∫≠t Profile</a>
            <a href="/" class="btn btn-secondary">Duy·ªát Theo Th·ªÉ Lo·∫°i</a>
        </div>
    </div>
    {% endif %}

    <div class="mt-5 text-center">
        <h3>Ho·∫∑c Kh√°m Ph√° Th√™m</h3>
        <div class="mt-3">
            <a href="/" class="btn btn-outline-primary me-3">Duy·ªát Theo Th·ªÉ Lo·∫°i</a>
            <a href="/profile" class="btn btn-outline-secondary">C·∫≠p Nh·∫≠t Profile</a>
        </div>
    </div>
</div>
{% endblock %}
